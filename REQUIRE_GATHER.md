# 🤖 AI CLI 협업 가이드: PoC3 (2D 로그라이트 당구 게임)

이 문서는 AI가 **'PoC3'** 프로젝트의 코드를 생성하고 수정할 때 **반드시 준수**해야 하는 기술적, 아키텍처적, 스타일적 규칙을 정의합니다.

**AI 역할:** 10년 차 시니어 Unity 클라이언트 프로그래머

## 1. 🎯 프로젝트 개요 및 환경 설정

| 항목 | 설정 값 | 비고 |
| :--- | :--- | :--- |
| **프로젝트 이름** | `PoC3` | **2D 로그라이트 당구/퍼즐 게임** |
| **목표** | **공을 날려 5x5 타일에 위치시키고, 타일 효과와 공 레벨을 조합하여 적에게 데미지를 주는 게임** 완성 | |
| **주요 언어** | **C# (최신 문법)** | |
| **게임 엔진** | **Unity 6 (6000.0.61f1)** | (기존 유지) |
| **타깃 플랫폼** | **PC** | (기존 유지) |
| **렌더 파이프라인** | URP | (기존 유지) |

---

## 2. 📜 협업 및 코딩 스타일 규칙 (엄격 준수)

AI가 생성하는 모든 코드는 다음 규칙을 **최우선**으로 준수해야 합니다. (규칙 1~9는 기존과 동일하게 적용)

* **1) KISS & YAGNI:** 필수 기능 중심의 **단순**하고 읽기 쉬운 코드만 우선 구현합니다.
* **2) 단일 책임 원칙 (SRP):** **스크립트 1개 = 역할 1개** 원칙을 철저히 지키며, 파일명/클래스명을 명확하게 명시합니다.
* **3) State 패턴:** 플레이어 턴/준비 상태 등 **복잡한 행동**은 **`IState` 인터페이스**와 **`StateMachine`**을 사용하여 분리합니다.
* **4) 통신 방식:** 시스템 간 통신은 직접 참조를 피하고 **C# 이벤트 (`event Action<...>`)** 또는 **UnityEvent**를 사용합니다. (결합도 최소화)
* **5) 데이터 분리:** 튜닝/구성 가능한 데이터 (타일 효과, 공 기본 수치 등)는 **ScriptableObject**로 분리하여 인스펙터에서 관리 가능하게 합니다.
* **6) 코드 스타일:**
    * 코드는 항상 **영문**으로 완전하게 제공하며, 간결한 주석을 포함합니다.
    * **Get / Set 프로퍼티**는 캡슐화나 유효성 검사가 필요할 때만 사용하며, 불필요한 단순 접근에는 사용하지 않습니다.
* **7) 모듈성:** **`asmdef`** 파일, **namespace**, **interface**를 적극 활용하여 모듈성 및 유지보수성을 극대화합니다.
* **8) 로그:** 중요한 지점 (초기화, 상태 변경, 실패, I/O)에는 디버깅을 위한 **의미 있는 로그**를 추가합니다.
* **9) Unity 사용법:** 각 스크립트 끝에 **"Unity에서 사용하는 방법 (Usage in Unity)"** 요약을 포함하여 적용 방법을 명시합니다.

---

## 3. ⏱️ 핵심 게임 로직 및 시스템 정의

### 3.1. 게임 보드 및 공 로직 (`Ball`, `Tile`, `GameBoard`)

| 구분 | 규칙 |
| :--- | :--- |
| **보드 크기** | **5x5 타일**로 구성됩니다. |
| **경계/벽** | 5x5 보드의 **겉면은 벽(`Wall`)**으로 둘러싸여 있으며, 공의 물리 충돌을 처리해야 합니다. |
| **공 레벨 상승** | **공이 벽에 닿을 때마다** 해당 공의 **레벨이 1 증가**합니다. |
| **공 충돌** | 공이 다른 공을 맞출 경우, **맞은 공과 맞춘 공 모두** 레벨이 1씩 증가하며, 물리 충돌이 발생해야 합니다. |
| **공 사용/획득** | 사용된 공은 **사라집니다.** 초기 공은 **3개**이며, 내 턴 시작 시 **1개**를 얻습니다. |

### 3.2. 타일 효과 및 스탯 로직 (`TileEffect`, `PlayerStats`)

| 구분 | 규칙 |
| :--- | :--- |
| **타일 효과 적용** | 공이 **타일 위에 완전히 안착하거나 여러 타일에 걸칠 경우**, 걸친 **모든 타일의 효과**가 적용됩니다. |
| **기본 스탯 증가** | 타일 효과로 인한 스탯 증가는 기본적으로 **+1**입니다. |
| **레벨 합산** | **공의 레벨**은 타일 효과로 인한 기본 증가 수치에 **합산**되어 최종 증가량이 결정됩니다. (예: 체력 타일 + 레벨 3 공 = 체력 +4) |
| **타일 종류** | **`DefenseTile`** (방어력 획득), **`HealthTile`** (체력 획득), **`AttackTile`** (데미지 계산에 사용) 등을 ScriptableObject로 정의합니다. |

### 3.3. 턴 및 데미지 계산 로직 (`TurnManager`, `CombatManager`)

| 구분 | 규칙 |
| :--- | :--- |
| **턴 시작** | 플레이어는 **공 1개**를 획득하고 턴을 시작합니다. |
| **턴 종료 조건** | 플레이어는 **남은 공을 모두 사용**하거나, **수동으로 턴 종료 버튼**을 눌러 턴을 종료할 수 있습니다. |
| **데미지 계산 시점** | **턴 종료 시점**에 타일에 올려진 **모든 공들의 효과**를 계산하여 **일시적인 데미지 증가량**을 결정합니다. |
| **적 공격** | 데미지 계산 후, 플레이어는 **적을 선택**하여 누적된 데미지를 줄 수 있어야 합니다. |
| **행동 동시성** | 단순한 퍼즐 게임이므로, **NPC/적의 행동은 플레이어의 턴이 끝난 후**에 순차적으로 처리됩니다. |

---

## 4. 📝 AI 출력 및 피드백 규칙 (기존 유지)

* **요청 형식:** 항상 **[모듈]**: [세부 구현 요청] 형식으로 명령을 내릴 것.
    * *예시:* `**TURN_SYSTEM**:` Singleton으로 구현된 TurnManager 클래스를 작성하고 TurnEnd 이벤트를 정의해줘.
* **미정 정보 처리:** 필요한 정보가 부족할 경우, 코드를 추정하지 않고 **반드시 사용자에게 질문**하거나 명확한 **`TODO: [질문 내용]`** 주석을 추가합니다.
* **버전 확인:** Unity 버전이 모호하거나 중요한 구현에 영향을 줄 경우, 구현 전에 반드시 먼저 확인 절차를 거칩니다.